# Universal Architecture - Visual Guide

## System Boot Sequence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BROWSER LOADS index.html                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   src/main.jsx renders                          â”‚
â”‚                   <Provider store={store}>                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   App component mounted                         â”‚
â”‚                   useSystemLoader hook runs                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â†“                â†“                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Load Compendium â”‚ â”‚   Load Env  â”‚ â”‚ Load Sim     â”‚
    â”‚                 â”‚ â”‚             â”‚ â”‚              â”‚
    â”‚ compendium.json â”‚ â”‚ Time, Bonus â”‚ â”‚ localStorage â”‚
    â”‚ â”€â†’ Redux       â”‚ â”‚ â”€â†’ Redux   â”‚ â”‚ â”€â†’ Redux    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“                â†“                â†“
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   âœ… Systems Online                             â”‚
â”‚            Render <MainDashboard /> or Components              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Architecture

```
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   JSON FILES (Static Data)   â•‘
                    â•‘  - compendium.json          â•‘
                    â•‘  - constants.ts             â•‘
                    â•‘  - sources.json             â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â†“ (import)
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘  SYSTEM LOADER HOOK          â•‘
                    â•‘  (Adapter Pattern)           â•‘
                    â•‘  useSystemLoader.ts          â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â†“ (dispatch)
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â†“                 â†“                 â†“
    â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—  â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—  â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—
    â•‘   Compendium â”‚  â”‚ Environment  â”‚  â”‚ Simulation   â”‚
    â•‘    Slice     â”‚  â”‚   Slice      â”‚  â”‚   Slice      â”‚
    â•‘              â”‚  â”‚              â”‚  â”‚              â”‚
    â•‘ Items        â”‚  â”‚ Time of Day  â”‚  â”‚ Cash         â”‚
    â•‘ Animals      â”‚  â”‚ Weather      â”‚  â”‚ Gold         â”‚
    â•‘ Formulas     â”‚  â”‚ Bonuses      â”‚  â”‚ Rank         â”‚
    â•‘ Roles        â”‚  â”‚ Events       â”‚  â”‚ Roles        â”‚
    â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•  â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•  â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
            â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
            â•‘   REDUX STORE                â•‘
            â•‘   Combined Root Reducer      â•‘
            â•‘   (app/store.ts)             â•‘
            â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â†“ (useSelector)
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â†“                 â†“                 â†“
    â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—  â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—  â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—
    â•‘  Components  â”‚  â•‘  Components  â”‚  â•‘  Components  â”‚
    â•‘              â”‚  â”‚              â”‚  â”‚              â”‚
    â•‘  Catalog UI  â”‚  â”‚  Map UI      â”‚  â•‘  Dashboard   â”‚
    â•‘  Item Cards  â”‚  â”‚  Weather     â”‚  â•‘  Stats       â”‚
    â•‘  Browser     â”‚  â”‚  Time        â”‚  â•‘  Purchase    â”‚
    â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•  â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•  â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Redux Store Shape (Visual)

```
STORE
â”œâ”€â”€ SIMULATION (Player State)
â”‚   â”œâ”€â”€ character_id: 'demo_character'
â”‚   â”œâ”€â”€ rank: 25
â”‚   â”œâ”€â”€ cash: 5000.00
â”‚   â”œâ”€â”€ gold_bars: 50.00
â”‚   â”œâ”€â”€ honor_level: 0
â”‚   â”œâ”€â”€ TRADER STATE
â”‚   â”‚   â”œâ”€â”€ trader_rank: 10
â”‚   â”‚   â”œâ”€â”€ trader_goods: 75
â”‚   â”‚   â””â”€â”€ trader_wagon_size: 'large'
â”‚   â”œâ”€â”€ MOONSHINER STATE
â”‚   â”‚   â”œâ”€â”€ moonshiner_rank: 15
â”‚   â”‚   â”œâ”€â”€ moonshiner_shack_level: 3
â”‚   â”‚   â”œâ”€â”€ moonshiner_current_batch: 'strong'
â”‚   â”‚   â””â”€â”€ moonshiner_batch_progress: 50
â”‚   â””â”€â”€ last_update: 1702664400000
â”‚
â”œâ”€â”€ COMPENDIUM (Static Game Data)
â”‚   â”œâ”€â”€ data: {
â”‚   â”‚   â”œâ”€â”€ items: {
â”‚   â”‚   â”‚   'w_mauser': { id, name, price, ... },
â”‚   â”‚   â”‚   'h_arabian': { id, name, price, ... },
â”‚   â”‚   â”‚   ...
â”‚   â”‚   },
â”‚   â”‚   â”œâ”€â”€ animals: {
â”‚   â”‚   â”‚   'cougar': { id, name, materials, spawns, ... },
â”‚   â”‚   â”‚   'panther': { id, name, materials, spawns, ... },
â”‚   â”‚   â”‚   ...
â”‚   â”‚   },
â”‚   â”‚   â”œâ”€â”€ formulas: {
â”‚   â”‚   â”‚   'bounty_cash_payout': { id, formula, ... },
â”‚   â”‚   â”‚   ...
â”‚   â”‚   },
â”‚   â”‚   â”œâ”€â”€ regions: {
â”‚   â”‚   â”‚   'west_elizabeth': { ... },
â”‚   â”‚   â”‚   'lemoyne': { ... }
â”‚   â”‚   },
â”‚   â”‚   â”œâ”€â”€ roles: {
â”‚   â”‚   â”‚   'trader': { ... },
â”‚   â”‚   â”‚   'bounty_hunter': { ... }
â”‚   â”‚   },
â”‚   â”‚   â”œâ”€â”€ fast_travel_nodes: { ... },
â”‚   â”‚   â”œâ”€â”€ fast_travel_routes: [ ... ],
â”‚   â”‚   â””â”€â”€ collector_sets: [ ... ]
â”‚   },
â”‚   â”œâ”€â”€ loading: false
â”‚   â”œâ”€â”€ error: null
â”‚   â””â”€â”€ lastLoaded: '2025-12-03T10:00:00Z'
â”‚
â”œâ”€â”€ ENVIRONMENT (Game World State)
â”‚   â”œâ”€â”€ time_of_day: 'day'
â”‚   â”œâ”€â”€ weather: 'clear'
â”‚   â”œâ”€â”€ active_bonuses: [
â”‚   â”‚   { id: 'trader_bonus', multiplier: 1.5, ... }
â”‚   â”‚ ]
â”‚   â”œâ”€â”€ current_date: '2025-12-03'
â”‚   â””â”€â”€ server_maintenance: false
â”‚
â””â”€â”€ ECONOMICS (Cached Calculations)
    â”œâ”€â”€ calculated_profits: {
    â”‚   'trader_optimized': {
    â”‚       activity: 'trader',
    â”‚       base_profit: 500,
    â”‚       total_profit: 750,
    â”‚       profit_per_hour: 225
    â”‚   },
    â”‚   ...
    â”‚ }
    â”œâ”€â”€ optimal_routes: {
    â”‚   'hunting_route_1': { ... },
    â”‚   ...
    â”‚ }
    â”œâ”€â”€ role_rankings: [
    â”‚   { role: 'trader', profit_per_hour: 225 },
    â”‚   { role: 'moonshiner', profit_per_hour: 210 }
    â”‚ ]
    â””â”€â”€ last_calculated: '2025-12-03T10:05:00Z'
```

---

## Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APP (Redux Provider)                    â”‚
â”‚                   AppNew.tsx                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         useSystemLoader (Boot Sequence)              â”‚  â”‚
â”‚  â”‚              â†“ Loading                              â”‚  â”‚
â”‚  â”‚              â†’ Error Screen                         â”‚  â”‚
â”‚  â”‚              âœ“ Ready â†’ Render Dashboard             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Title | Cash | Gold | Rank | Settings        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Catalog                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Compendium                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Map                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Calculator                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Analytics                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ [FEATURE COMPONENT RENDERS HERE]           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ e.g. CatalogBrowser:                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ ItemCard (Item 1)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ ItemCard (Item 2)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ ItemCard (Item 3)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ e.g. AnimalCompendium:                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ AnimalCard (Cougar)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€ AnimalCard (Panther)                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€ Region Filter                        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Version | Last Update | Export/Import     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Adding a New Feature (Visual)

```
Step 1: Define Interface
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
schema/rdo_unified_schema.ts
    â†“ Add: interface NaturalistSample { ... }

Step 2: Create Reducer
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
features/naturalistSlice.ts
    â”œâ”€ initialState: { samples: [] }
    â””â”€ reducers: { stampSample, completeSample, ... }

Step 3: Register Slice
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
app/store.ts
    â”œâ”€ import naturalistReducer
    â””â”€ rootReducer: combineReducers({ naturalist, ... })

Step 4: Add Business Logic
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
models/naturalist-logic.ts
    â”œâ”€ calculateSampleValue(quality)
    â”œâ”€ selectOptimalStudyRoute()
    â””â”€ determineSampleDrops()

Step 5: Build Components
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
components/features/naturalist/
    â”œâ”€ NaturalistBrowser.tsx     â† Main UI
    â”œâ”€ SampleCard.tsx            â† Reusable card
    â””â”€ HarrietMenu.tsx           â† Sell samples

Step 6: Load Data
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
data/static/naturalist.json
    â”œâ”€ samples: { 'cougar_pelt': {...}, ... }
    â””â”€ harriet_buy_prices: { ... }

Step 7: Integrate Boot Sequence
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
hooks/useSystemLoader.ts
    â”œâ”€ import naturalistData
    â””â”€ dispatch(loadNaturalistData())

RESULT: Complete system integrated without touching core Redux!
```

---

## Data Flow Example: Purchase Item

```
User clicks "Buy Item" button
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OnClick Handler         â”‚
â”‚ dispatch(action)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ simulationSlice         â”‚
â”‚ updatePlayerCash(      â”‚
â”‚   -item.price          â”‚
â”‚ )                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redux Store Updated     â”‚
â”‚ simulation.cash -= 500  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component Subscribed to â”‚
â”‚ state.simulation.cash   â”‚
â”‚ via useSelector         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component Re-renders    â”‚
â”‚ Displays new cash:      â”‚
â”‚ $4,500 (was $5,000)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useSaveState() Hook     â”‚
â”‚ Saves to localStorage   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance Optimization Pattern

```
WITHOUT Memoization (âŒ Bad)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const items = useAppSelector(state => 
  state.compendium.items
    .filter(i => i.price < 1000)  â† NEW ARRAY EVERY RENDER
);
// Component re-renders every time âŒ

WITH createSelector (âœ… Good)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const selectCheapItems = createSelector(
  [state => state.compendium.items],
  (items) => items.filter(i => i.price < 1000)  â† SAME REFERENCE
);
const items = useAppSelector(selectCheapItems);
// Component only re-renders if result changes âœ…
```

---

## Data Quality Metadata Flow

```
Original Source
    â†“
    â”œâ”€ GAME_TEST (Verified in game)
    â”œâ”€ REDDIT (Community consensus)
    â”œâ”€ WIKI (Documentation)
    â””â”€ CALCULATED (Derived from formula)
    
Confidence Tier Assignment
    â†“
    â”œâ”€ HIGH (2+ independent sources)
    â”œâ”€ MEDIUM (1 source, verified)
    â””â”€ LOW (1 source, unverified)
    
JSON Storage
    â†“
    data_quality: {
      confidence: 'HIGH',
      sources: [
        { type: 'GAME_TEST', date: '2025-11-20', verified_by: 'Pro1994' }
      ],
      last_verified: '2025-11-20',
      patch_version: '1.0.0'
    }
    
UI Filtering
    â†“
    â””â”€ User can filter: "Show only HIGH confidence"
         Displays: 12/15 items (3 need verification)
```

---

## Persistence Flow

```
User Gameplay Session
        â†“
State Changes (Cash, Rank, Items)
        â†“
        â”œâ”€ Auto-save every 30s (useSaveState hook)
        â”œâ”€ Manual save on logout
        â””â”€ Manual export to JSON file
        
        â†“
localStorage
    â”œâ”€ rdo_sim_simulation
    â”œâ”€ rdo_sim_environment
    â””â”€ rdo_sim_economics
        
        â†“
User Closes Browser
        â†“
User Returns Tomorrow
        â†“
useSystemLoader runs
    â”œâ”€ Checks localStorage
    â”œâ”€ Restores saved state
    â””â”€ App resumes where user left off
        
        â†“
User Clicks "Export"
        â†“
JSON file downloaded
    â””â”€ Can share, backup, or import into new device
```

---

**Visual reference complete. Refer to code files for implementation details.** ğŸ“Š

